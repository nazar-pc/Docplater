// Generated by LiveScript 1.4.0
/**
 * @package   Docplater app
 * @category  modules
 * @author    Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright Copyright (c) 2016, Nazar Mokrynskyi
 * @license   AGPL-3.0, see license.txt
 */
(function(){
  cs.Docplater.Redux.behavior.then(function(reduxBehavior){
    Polymer({
      is: 'docplater-document',
      behaviors: [cs.Docplater.behaviors.attached_once, reduxBehavior],
      properties: {
        document: {
          statePath: 'document',
          type: Object
        },
        hash: String,
        preview: {
          statePath: 'preview',
          type: Boolean
        }
      },
      created: function(){
        var this$ = this;
        this.attached_once.then(function(){
          return cs.api('get api/Docplater_app/documents/' + this$.hash);
        }).then(function(document){
          this$.dispatch({
            type: 'DOCUMENT_LOADED',
            document: document
          });
          this$.$.content.innerHTML = document.content;
          require(['scribe'], function(Scribe){
            new Scribe(this$.$.content);
          });
        });
      },
      _toggle_preview: function(){
        this.dispatch({
          type: 'PREVIEW_TOGGLE'
        });
      }
    });
  });
}).call(this);
