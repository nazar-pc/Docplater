// Generated by LiveScript 1.4.0
/**
 * @package    CleverStyle Framework
 * @subpackage System module
 * @category   modules
 * @author     Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright  Copyright (c) 2015-2016, Nazar Mokrynskyi
 * @license    MIT License, see license.txt
 */
(function(){
  Polymer({
    'is': 'cs-system-admin-optimization',
    behaviors: [cs.Polymer.behaviors.Language('system_admin_optimization_'), cs.Polymer.behaviors.admin.System.settings],
    properties: {
      path_prefix: '',
      settings_api_url: 'api/System/admin/optimization'
    },
    _clean_cache: function(){
      this._clean_cache_common('clean_cache');
    },
    _clean_public_cache: function(){
      this._clean_cache_common('clean_public_cache');
    },
    _clean_cache_common: function(method){
      var modal, this$ = this;
      modal = cs.ui.simple_modal("<progress is=\"cs-progress\" infinite></progress>");
      cs.api((method + " ") + this.settings_api_url, {
        path_prefix: this.path_prefix
      }).then(function(){
        modal.innerHTML = "<p class=\"cs-block-success cs-text-success\">" + this$.L.done + "</p>";
      })['catch'](function(o){
        clearTimeout(o.timeout);
        modal.innerHTML = "<p class=\"cs-block-error cs-text-error\">" + this$.L.error + "</p>";
      });
    }
  });
}).call(this);
